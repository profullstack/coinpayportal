[build]
buildCommand = "pnpm install --no-frozen-lockfile && (apt-get update && apt-get install -y python3-pip python3-venv && python3 -m venv /tmp/glvenv && /tmp/glvenv/bin/pip install gl-client requests && cp -r /tmp/glvenv /app/.venv || echo 'GL SDK install skipped') && pnpm run build"

[deploy]
startCommand = "NODE_OPTIONS=--max-old-space-size=512 pnpm start"
healthcheckPath = "/"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[[deploy.environmentVariables]]
name = "NODE_ENV"
value = "production"
